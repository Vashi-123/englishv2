# План рефакторинга AppContent.tsx

## Текущее состояние
- **AppContent.tsx**: 2360 строк - слишком большой компонент
- Смешаны: состояние, логика, UI, модальные окна

## Предлагаемая структура

### 1. Компоненты для разделения ответственности

#### `components/dashboard/Dashboard.tsx` (~600 строк)
- Главный экран с прогрессом курса
- Карточки уроков
- Кнопки "Начать урок", "Слова", "Грамматика"
- Header с меню языка

#### `components/dashboard/DashboardHeader.tsx` (~150 строк)
- Логотип и меню языка
- Информация об аккаунте
- Управление уровнем
- Кнопки "Начать сначала", "Выйти"

#### `components/dashboard/CourseProgress.tsx` (~200 строк)
- Прогресс курса
- Список дней/уроков
- Визуализация прогресса

#### `components/exercise/ExerciseView.tsx` (~150 строк)
- Обертка для Step4Dialogue
- Навигация между уроками
- Обработка завершения урока

#### `components/modals/InsightPopup.tsx` (~200 строк)
- Модальное окно с дорожной картой курса
- Список модулей и этапов

#### `components/modals/WordsModal.tsx` (~400 строк)
- Модальное окно со словами
- Режим повторения слов
- Карточки для изучения

#### `components/modals/GrammarModal.tsx` (~200 строк)
- Модальное окно с грамматикой
- Список грамматических тем

#### `components/modals/ConfirmModal.tsx` (~100 строк)
- Модальное окно подтверждения
- Подтверждение сброса прогресса / выхода

#### `components/modals/PremiumGateModal.tsx` (~100 строк)
- Модальное окно для премиум-уроков
- Информация о блокировке

### 2. Хуки для логики

#### `hooks/useLessonProgress.ts` (~200 строк)
- Логика загрузки и сохранения прогресса
- Проверка завершения уроков
- Синхронизация с БД

#### `hooks/useWordsReview.ts` (~150 строк)
- Логика повторения слов
- SRS система
- Генерация вариантов ответов

#### `hooks/useLanguageMenu.ts` (~100 строк)
- Логика меню выбора языка
- Позиционирование меню
- Анимации

### 3. Утилиты

#### `utils/lessonUtils.ts`
- Функции для работы с уроками
- Префетчинг скриптов
- Очистка кэша

## Ожидаемый результат

### До:
- `AppContent.tsx`: 2360 строк

### После:
- `AppContent.tsx`: ~200 строк (координация компонентов)
- `Dashboard.tsx`: ~600 строк
- `DashboardHeader.tsx`: ~150 строк
- `CourseProgress.tsx`: ~200 строк
- `ExerciseView.tsx`: ~150 строк
- `InsightPopup.tsx`: ~200 строк
- `WordsModal.tsx`: ~400 строк
- `GrammarModal.tsx`: ~200 строк
- `ConfirmModal.tsx`: ~100 строк
- `PremiumGateModal.tsx`: ~100 строк
- `useLessonProgress.ts`: ~200 строк
- `useWordsReview.ts`: ~150 строк
- `useLanguageMenu.ts`: ~100 строк

**Итого**: ~2650 строк, но разделены на логические модули

## Преимущества

1. **Читаемость**: каждый файл отвечает за одну задачу
2. **Переиспользование**: компоненты можно использовать отдельно
3. **Тестирование**: легче тестировать маленькие компоненты
4. **Поддержка**: проще найти и исправить баги
5. **Командная работа**: разные разработчики могут работать параллельно

## Приоритет

1. **Высокий**: Модальные окна (самые большие функции render*)
2. **Средний**: Dashboard и его подкомпоненты
3. **Низкий**: Хуки и утилиты (можно делать постепенно)

