<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>GoPractice - Страница не найдена</title>
    <link rel="icon" type="image/x-icon" href="%BASE_URL%favicon.ico?v=2" />
    <script>
      (function () {
        const originalWarn = console.warn.bind(console);
        const allowWarning = typeof localStorage !== 'undefined' && localStorage.getItem('debug_tailwind_warning') === 'true';
        console.warn = (...args) => {
          if (
            !allowWarning &&
            typeof args[0] === 'string' &&
            args[0].includes('cdn.tailwindcss.com should not be used in production')
          ) {
            return;
          }
          originalWarn(...args);
        };
      })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        background-color: #F8FAFC;
        color: #0F172A;
        opacity: 0;
        transition: opacity 0.1s;
      }
      body.show {
        opacity: 1;
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center bg-slate-50">
    <div class="text-center px-4">
      <h1 class="text-6xl font-black text-slate-900 mb-4">404</h1>
      <p class="text-xl text-slate-600 mb-8">Страница не найдена</p>
      <a href="%BASE_URL%" class="inline-block px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors">
        Вернуться на главную
      </a>
    </div>
    <script>
      // SPA routing: redirect to index.html while preserving the path and query params
      // Execute immediately, before page renders
      (function() {
        const path = window.location.pathname;
        const search = window.location.search;
        const hash = window.location.hash;
        const base = '%BASE_URL%';
        
        // Don't redirect if already on index.html or root
        if (path === base || path === base + 'index.html' || path.endsWith('/index.html')) {
          document.body.classList.add('show');
          return;
        }
        
        // Save original path for React to read
        try {
          sessionStorage.setItem('spa_redirect_path', path + search + hash);
        } catch (e) {
          // ignore if sessionStorage not available
        }
        
        // Preserve query params and hash for email confirmation links (e.g., /auth/confirm?token=...)
        // Redirect to index.html - React will read the path from sessionStorage or URL
        const newPath = base + (base.endsWith('/') ? '' : '/') + 'index.html';
        const newUrl = newPath + search + hash;
        
        // Use replace to avoid adding to history - do it immediately
        window.location.replace(newUrl);
      })();
      
      // Fallback: show content only if redirect didn't happen after 100ms
      setTimeout(function() {
        if (document.body) {
          document.body.classList.add('show');
        }
      }, 100);
    </script>
  </body>
</html>
